<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qlass – Admissions Workflow</title>
  <link rel="stylesheet" href="../css/style.css" />
<style>

  /* Highlight Current Application card when a ticket is active */
#ticketViewer {
  border-left: 4px solid transparent;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

body.ticket-active #ticketViewer {
  border-left-color: #16a34a; /* same green as active ticket ID */
  box-shadow: 0 16px 40px rgba(22, 163, 74, 0.18);
}

/* Match active ticket line accent */
.ticket-history-item.active {
  background: rgba(22, 163, 74, 0.06);
  border-left: 3px solid #16a34a;
}

/* Optional: subtle bolding for current-application label */
#ticketViewer .section-title::after {
  content: ' • Selected from Ticket History';
  font-size: 0.8rem;
  font-weight: 500;
  color: #16a34a;
  margin-left: 0.3rem;
}

  /* === Ticket history colors === */

.ticket-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.ticket-history-item {
  padding: 0.4rem 0.6rem;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.15s ease, transform 0.1s ease;
}

.ticket-history-item:hover {
  background: rgba(37, 99, 235, 0.06); /* light blue hover */
  transform: translateY(-1px);
}

.ticket-history-item.active {
  background: rgba(22, 163, 74, 0.06); /* light green for active row */
  border-left: 3px solid #16a34a;
}

/* ticket ID colors */
.ticket-id {
  color: #1d4ed8;             /* dark blue by default */
  font-weight: 600;
}

.ticket-history-item.active .ticket-id {
  color: #15803d;             /* green when selected */
}

/* optional pill and line layout */
.ticket-line {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem 0.75rem;
  align-items: center;
  font-size: 0.85rem;
}

.ticket-name,
.ticket-course,
.ticket-time {
  color: #4b5563;
}

.ticket-status-pill {
  padding: 0.15rem 0.55rem;
  border-radius: 999px;
  background: rgba(37, 99, 235, 0.08);
  color: #1d4ed8;
  font-size: 0.75rem;
  font-weight: 500;
}

/* === Glassy theme & workflow stages === */

/* lightened glass variant inspired by your QMS styles */
:root {
  --qlass-bg: radial-gradient(circle at top, #e0f2fe 0, #e5e7eb 40%, #e5e7eb 100%);
  --qlass-surface: rgba(255, 255, 255, 0.86);
  --qlass-border: 1px solid rgba(148, 163, 184, 0.4);
  --qlass-shadow: 0 16px 40px rgba(15, 23, 42, 0.18);
  --qlass-text-main: #111827;
  --qlass-text-muted: #6b7280;

  --stage-verify-bg: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(219, 234, 254, 0.9));
  --stage-verify-accent: #2563eb;

  --stage-approval-bg: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(220, 252, 231, 0.95));
  --stage-approval-accent: #16a34a;

  --stage-enroll-bg: linear-gradient(135deg, rgba(234, 179, 8, 0.12), rgba(254, 249, 195, 0.95));
  --stage-enroll-accent: #ca8a04;
}

/* page background (lighter than QMS) */
body {
  background: var(--qlass-bg);
  color: var(--qlass-text-main);
}

/* generic cards */
.card {
  background: var(--qlass-surface);
  border: var(--qlass-border);
  box-shadow: var(--qlass-shadow);
  backdrop-filter: blur(14px);
}

/* section titles */
.section-title {
  color: #0f172a;
}

/* meta text */
.meta {
  color: var(--qlass-text-muted);
  font-size: 0.85rem;
}

/* pipeline container */
.pipeline {
  background: transparent;
}

/* stage cards */
.stage {
  border-radius: 16px;
  padding: 1.1rem 1.25rem;
  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
  border: 1px solid rgba(148, 163, 184, 0.35);
  color: var(--qlass-text-main);
}

/* distinct backgrounds per stage */
#stageVerification {
  background: var(--stage-verify-bg);
}

#stageApproval {
  background: var(--stage-approval-bg);
}

#stageEnrollment {
  background: var(--stage-enroll-bg);
}

/* stage headings */
.stage h3 {
  margin-top: 0;
  margin-bottom: 0.4rem;
  font-size: 1rem;
  font-weight: 600;
}

/* status badges */
.status-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 72px;
  padding: 0.15rem 0.6rem;
  border-radius: 999px;
  font-size: 0.75rem;
  font-weight: 600;
}

/* base colors for statuses */
.status-badge.pending {
  background: rgba(148, 163, 184, 0.16);
  color: #374151;
}

.status-badge.verified,
.status-badge.approved,
.status-badge.enrolled {
  background: rgba(22, 163, 74, 0.16);
  color: #166534;
}

.status-badge.rejected {
  background: rgba(239, 68, 68, 0.18);
  color: #b91c1c;
}

.status-badge.waitlisted {
  background: rgba(234, 179, 8, 0.18);
  color: #a16207;
}

/* pipeline track + fill */
.pipeline-track {
  background: rgba(209, 213, 219, 0.7);
}

.pipeline-fill {
  background: linear-gradient(90deg, #3b82f6, #22c55e);
}

/* buttons & selects */
.btn {
  border-radius: 999px;
  font-size: 0.85rem;
}

.btn-primary {
  background: #2563eb;
  color: #f9fafb;
}

.btn-primary:hover {
  background: #1d4ed8;
}

.btn-ghost {
  background: rgba(255, 255, 255, 0.6);
  color: #111827;
  border: 1px solid rgba(148, 163, 184, 0.7);
}

.btn-ghost:hover {
  background: rgba(219, 234, 254, 0.9);
}

.select {
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  padding: 0.25rem 0.6rem;
  font-size: 0.85rem;
  background: rgba(255, 255, 255, 0.9);
  color: #111827;
}

/* Ticket search input */

.ticket-search {
  width: 100%;
  max-width: 320px;
  padding: 0.45rem 0.85rem;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.6);
  background: rgba(255, 255, 255, 0.9);
  color: #111827;
  font-size: 0.85rem;
  outline: none;
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
  transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
}

.ticket-search::placeholder {
  color: #9ca3af;
}

.ticket-search:focus {
  border-color: #2563eb;              /* blue focus ring */
  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.25),
              0 10px 24px rgba(37, 99, 235, 0.20);
  background: #ffffff;
}

/* place search and title nicely in header if needed */
#ticketHistory .section-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
}

/* on narrow screens, stack title and search */
@media (max-width: 640px) {
  #ticketHistory .section-title {
    flex-direction: column;
    align-items: flex-start;
  }
  .ticket-search {
    max-width: 100%;
  }
}

.card-heading-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.back-link {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.7rem;
  border-radius: 999px;
  font-size: 0.8rem;
  text-decoration: none;
  border: 1px solid rgba(148, 163, 184, 0.6);
  background: rgba(255, 255, 255, 0.85);
  color: #1f2933;
  cursor: pointer;
  transition: background 0.15s ease, border-color 0.15s ease, transform 0.1s ease,
              box-shadow 0.15s ease;
}

.back-link:hover {
  background: rgba(219, 234, 254, 0.95);    /* light blue hover */
  border-color: #2563eb;
  transform: translateY(-1px);
  box-shadow: 0 8px 18px rgba(37, 99, 235, 0.18);
}

.back-link:active {
  transform: translateY(0);
  box-shadow: none;
}

/* On very small screens, stack back + title nicely */
@media (max-width: 640px) {
  .card-heading-row {
    flex-direction: column;
    align-items: flex-start;
  }
}

#admissionSnapshot {
  margin-top: 1rem;
}

.snapshot-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.snapshot-item {
  padding: 0.6rem 0.75rem;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(209, 213, 219, 0.9);
  box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
}

.snapshot-label {
  font-size: 0.75rem;
  color: #6b7280;
  margin-bottom: 0.15rem;
}

.snapshot-value {
  font-size: 1rem;
  font-weight: 600;
  color: #111827;
}

/* chips for per-course counts */
.snapshot-subgrid {
  margin-top: 0.75rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
}

.snapshot-chip {
  font-size: 0.75rem;
  padding: 0.2rem 0.5rem;
  border-radius: 999px;
  background: rgba(59, 130, 246, 0.08);
  color: #1d4ed8;
  border: 1px solid rgba(191, 219, 254, 0.9);
}

.snapshot-chip {
  font-size: 0.75rem;
  padding: 0.2rem 0.55rem;
  border-radius: 999px;
  background: rgba(59, 130, 246, 0.08);
  color: #1d4ed8;
  border: 1px solid rgba(191, 219, 254, 0.9);
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease,
              transform 0.1s ease;
}

.snapshot-chip:hover {
  background: rgba(59, 130, 246, 0.18);
  transform: translateY(-1px);
}

/* active course filter */
.snapshot-chip.active {
  background: rgba(22, 163, 74, 0.18);   /* light green */
  color: #166534;
  border-color: #16a34a;
}

.ticket-student-id {
  padding: 0.1rem 0.5rem;
  border-radius: 999px;
  background: rgba(34, 197, 94, 0.12);
  color: #15803d;
  font-size: 0.75rem;
  font-weight: 600;
}

</style>
  
</head>
<body>
  <header>
    <h1>Qlass – Admissions</h1>
    <nav>
      <a href="../index.html">Dashboard</a>
    </nav>
  </header>

  <main>
    <!-- Application form -->
    <section class="card">
      <div class="card-heading-row">
        <a href="../index.html" class="back-link">‹ Back to dashboard</a>
        <h2 class="section-title">Application form</h2>
      </div>
  
      <form id="applicationForm" novalidate>
        <div class="row">
          <div>
            <label for="studentName">Student name</label>
            <input id="studentName" name="studentName" type="text" required />
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="phone">Phone</label>
            <input id="phone" name="phone" type="tel" required />
          </div>
          <div>
            <label for="course">Course applied for</label>
            <select id="course" name="course" required>
              <option value="">Select a course</option>
              <option>Pre-Nursery</option>
              <option>Nursery</option>
              <option>LKG</option>
              <option>UKG</option>
              <option>Grade 1</option>
              <option>Grade 2</option>
              <option>Grade 3</option>
              <option>Grade 4</option>
              <option>Grade 5</option>
              <option>Grade 6</option>
              <option>Grade 7</option>
              <option>Grade 8</option>
              <option>Grade 9</option>
              <option>Grade 10</option>
              <option>Grade 11</option>
              <option>Grade 12</option>

              <option>B.Sc Computer Science</option>
              <option>B.Sc Mathematics</option>
              <option>B.Sc Physics</option>
              <option>BCA</option>
              <option>BBA</option>
              <option>B.Com</option>
              <option>B.Com Accounting &amp; Finance</option>
              <option>B.A English</option>
              <option>B.A Economics</option>
              <option>B.A Psychology</option>
              <option>B.Tech Computer Science</option>
              <option>BE Computer Science</option>

              <option>MBA</option>
              <option>MCA</option>
              <option>M.Com</option>
              <option>M.A English</option>
              <option>M.A Economics</option>
              <option>M.Sc Data Science</option>
              <option>M.Sc Computer Science</option>
              <option>M.Sc Artificial Intelligence</option>
            </select>
          </div>
        </div>

        <div class="row"> 
          <div> 
            <label for="dob">Date of Birth</label> 
            <input id="dob" name="dob" type="date" required /> 
          </div> 
          <div> 
            <label for="address">Address</label> 
            <textarea id="address" name="address" rows="3" required>              
            </textarea> 
          </div> 
        </div>
        
        <label for="docs">Upload documents</label>
        <input id="docs" name="docs" type="file" multiple />

        <label for="notes">Applicant notes (optional)</label>
        <textarea id="notes" name="notes" rows="3"></textarea>

        <div class="actions">
          <button type="submit" class="btn btn-primary">Submit application</button>
          <button type="reset" class="btn btn-ghost">Reset</button>
          <button type="button" id="clearState" class="btn btn-ghost">Clear saved state</button>
        </div>
      </form>
    </section>

    <!-- Pipeline -->
    <section class="pipeline">
      <div class="pipeline-track"></div>
      <div id="pipelineFill" class="pipeline-fill"></div>

      <h2 class="section-title">Workflow stages</h2>
      <div class="stages">
        <div class="stage" id="stageVerification">
          <h3>Verification</h3>
          <span id="statusVerification" class="status-badge pending">Pending</span>
          <div id="metaVerification" class="meta">Awaiting submission</div>
          <div class="controls">
            <select id="verificationAction" class="select">
              <option value="verified">Mark as Verified</option>
              <option value="rejected">Reject</option>
              <option value="waitlisted">Waitlist</option>
            </select>
            <button type="button" class="btn btn-ghost" id="applyVerification">Apply</button>
          </div>
        </div>

        <div class="stage" id="stageApproval">
          <h3>Approval</h3>
          <span id="statusApproval" class="status-badge pending">Pending</span>
          <div id="metaApproval" class="meta">Requires verified status</div>
          <div class="controls">
            <select id="approvalAction" class="select">
              <option value="approved">Approve</option>
              <option value="rejected">Reject</option>
              <option value="waitlisted">Waitlist</option>
            </select>
            <button type="button" class="btn btn-ghost" id="applyApproval">Apply</button>
          </div>
        </div>

        <div class="stage" id="stageEnrollment">
          <h3>Enrollment</h3>
          <span id="statusEnrollment" class="status-badge pending">Pending</span>
          <div id="metaEnrollment" class="meta">Requires approved status</div>
          <div class="controls">
            <select id="enrollmentAction" class="select">
              <option value="enrolled">Enroll</option>
              <option value="rejected">Reject</option>
            </select>
            <button type="button" class="btn btn-ghost" id="applyEnrollment">Apply</button>
          </div>
        </div>
      </div>
    </section>

      <!-- Ticket viewer flow -->
      <section class="card" id="ticketViewer" style="display:none;">
        <h2 class="section-title">Current Application</h2>
        <div class="meta" id="ticketSummary"></div>
      </section>
  
     <!-- Current year dashboard figures -->
     <section class="card" id="admissionSnapshot" style="display:none;">
      <h2 class="section-title">Admissions Snapshot</h2>
      <div class="snapshot-grid">
        <div class="snapshot-item">
          <div class="snapshot-label">Total applications</div>
          <div class="snapshot-value" id="snapTotal">0</div>
        </div>
        <div class="snapshot-item">
          <div class="snapshot-label">Verified</div>
          <div class="snapshot-value" id="snapVerified">0</div>
        </div>
        <div class="snapshot-item">
          <div class="snapshot-label">Approved</div>
          <div class="snapshot-value" id="snapApproved">0</div>
        </div>
        <div class="snapshot-item">
          <div class="snapshot-label">Enrolled</div>
          <div class="snapshot-value" id="snapEnrolled">0</div>
        </div>
        <div class="snapshot-item">
          <div class="snapshot-label">Rejected</div>
          <div class="snapshot-value" id="snapRejected">0</div>
        </div>
        <div class="snapshot-item">
          <div class="snapshot-label">This year</div>
          <div class="snapshot-value" id="snapThisYear">0</div>
        </div>
      </div>
    
      <div class="snapshot-subgrid" id="snapByCourse">
        <!-- e.g. Grade 1: 4 • B.Sc CS: 3 -->
      </div>
    </section>

    <section class="card" id="ticketHistory" style="display:none;">
      <h2 class="section-title">Ticket History</h2>
    
      <!-- Search bar -->
      <div class="meta" style="margin-bottom:0.6rem;">
        <input
          type="search"
          id="ticketSearch"
          class="ticket-search"
          placeholder="Search by ticket ID or student name..."
          autocomplete="off"
        />
      </div>
    
      <!-- Ticket list -->
      <div class="meta">
        <ul id="ticketHistoryList" class="ticket-list"></ul>
      </div>
    </section>
  </main>

  <div id="toast" class="toast"></div>

  <!-- Admissions workflow logic -->
  <script src="../js/admissions.js"></script>
</body>
</html>
